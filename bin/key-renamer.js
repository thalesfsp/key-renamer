var util=require("util"),mergeRecursive=function(e,l){for(var o in l)try{l[o].constructor===Object?e[o]=mergeRecursive(e[o],l[o]):e[o]=l[o]}catch(a){e[o]=l[o]}return e},logDebug=function(e,l,o){console.log("Original key: ",e),console.log("New key: ",util.inspect(l,{showHidden:!0,depth:3})),console.log("Key value: ",o),console.log("")},keyRenamer=function(originalObject,map,debug){var updatedObject={},newKey,value
return debug&&(console.log("Original object:",util.inspect(originalObject,{showHidden:!0,depth:10,colors:!0})),console.log(""),console.log("Map object:",util.inspect(map,{showHidden:!0,depth:3})),console.log("")),Object.keys(originalObject).forEach(function(key){var tempKey={}
newKey=map[key]||key,-1!==newKey.indexOf(":")&&-1!==newKey.indexOf("$value")?(value=originalObject[key],value&&"Number"!==value.constructor.name&&"Boolean"!==value.constructor.name&&(value=JSON.stringify(value)),newKey=newKey.replace("$value",value),eval("var tempKey = "+newKey),value&&"Object"===value.constructor.name&&(value=keyRenamer(value,map)),debug&&logDebug(key,tempKey,value),mergeRecursive(updatedObject,tempKey)):(value=originalObject[key],debug&&logDebug(key,newKey,value),value&&"Object"===value.constructor.name&&(value=keyRenamer(value,map)),updatedObject[newKey]=value)}),updatedObject}
module.exports=keyRenamer
